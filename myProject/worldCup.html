<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>음식 월드컵</title>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous">
</script>
  <style>
    body
    .container1>h1{
      text-align: center;
      margin-top: 20px;
      font-family: sans-serif,serif,monospace;
      margin-top: 30px;
      margin-bottom: 30px;
      color: white;
    }
    .container1 {
      width: 100%;
      height: 900px;
      margin: 0 auto;
      padding: 20px;
      background: #E5D0AC;
      border: 1px solid #ccc;
      border-radius: 10px;
    }
    .container1>h3{
      font-weight: bold;
      color: white;
      margin-bottom: 50px;
      text-align: center;
    }
    
    .menu-container {
      display: flex;
      justify-content: space-around;
    }
    .menu-item {
      width: 50%;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .menu-item:hover {
      transform: scale(1.1);
    }
    .menu-item img {
      width: 100%;
      height: 400px;
      object-fit: cover;
      border-radius: 10px;
    }
    .menu-item h4 {
      text-align: center;

      font-weight: bold;
      margin-top: 30px;
    }
  </style>
</head>
<body class="index-page">
  <div id="header"></div>
<main>
  <div class="container1">
    <h1>메뉴 이상형 월드컵</h1>
    <h3>8강</h3>
    <div class="menu-container">
      <div class="menu-item" id="left" onclick="chooseMenu('left')">
        <img src="img/갈비탕.jpg" id="left-img" alt="왼쪽 메뉴">
        <h4 id="left-name">메뉴 A</h4>
      </div>
      <div class="menu-item" id="right" onclick="chooseMenu('right')">
        <img src="img/골뱅이무침.jpg" id="right-img" alt="오른쪽 메뉴">
        <h4 id="right-name">메뉴 B</h4>
      </div>
    </div>
   <!-- 모달 -->
 <button type="button" id="randomBtn"  data-bs-toggle="modal" data-bs-target="#exampleModal"></button>
 <!-- 모달 -->
 <div class="modal  fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered">
       <div class="modal-content">
           <div class="modal-header">
               <h1 class="modal-title fs-5" id="exampleModalLabel">메뉴 이상형 월드컵</h1>
               <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
           </div>
           <div class="modal-body" id="modal-body">
             
           </div>
           <div class="modal-footer">
               <button type="button" id="random" class="btn btn-primary" class="btn btn-secondary" data-bs-dismiss="modal">시작</button>
           </div>
       </div>
   </div>
</div>
   
  </div>
  
</main>

<div id="footer"></div>
<script src="js/ready.js"></script>
  <script>
  
   const menuList = JSON.parse(localStorage.getItem('foodList'));
   console.log(menuList);
   function makeSelect(){
   let modalBody = document.querySelector('#modal-body');
   console.log(menuList.length)
  if(menuList.length<8){
    modalBody.innerHtml=` <select name="tonerment" id="tonerment" class="form-select form-select-lg mb-3">
                          <option selected value="4">4강</option>
                          </select>`
  }else if(menuList.length<16){
    modalBody.innerHTML=`<select name="tonerment" id="tonerment" class="form-select form-select-lg mb-3">
                         <option selected value="8">8강</option>
                         <option value="4">4강</option> 
                         </select>`
  }else if(menuList.length<32){
    modalBody.innerHTML=`<select name="tonerment" id="tonerment" class="form-select form-select-lg mb-3">
                         <option selected value="16">16강</option>
                         <option value="8">8강</option>
                         <option value="4">4강</option>
                         </select>`
  } else{
    modalBody.innerHTML=`<select name="tonerment" id="tonerment" class="form-select form-select-lg mb-3">
                         <option selected value="32">32강</option>
                         <option value="16">16강</option>
                         <option value="8">8강</option>
                         <option value="4">4강</option>
                         </select>`}
  } 
   makeSelect();
   document.querySelector('#randomBtn').click();
   let roundMenus = menuList; // 현재 라운드의 메뉴 리스트
   let nextRoundMenus = []; // 다음 라운드로 올라갈 메뉴
   let round = 1;

  document.querySelector('#random').addEventListener('click',function(){
    let selected = document.querySelector('#tonerment').value
    for(let i = 0; i<selected; i++){
      let id = Math.floor(Math.random()*roundMenus.length);
      nextRoundMenus.push(roundMenus[id]);
      roundMenus.splice(id,1)
      startGame();
    }
  })


    function startGame() {
      if (roundMenus.length === 1) {
        alert(`최종 우승 메뉴: ${roundMenus[0].name}`);
        return;
      }

      updateMenus();
    }

  //   function updateMenus() {
  //     if (roundMenus.length < 2) {
  //       roundMenus = nextRoundMenus;
  //       nextRoundMenus = [];
  //       alert(`다음 라운드 진출! (남은 메뉴: ${roundMenus.length}개)`);
  //     }
  //     document.getElementById("left-img").src = roundMenus[0].src;
  //     document.getElementById("left-name").textContent = roundMenus[0].name;
  //     document.getElementById("right-img").src = roundMenus[1].src;
  //     document.getElementById("right-name").textContent = roundMenus[1].name;
  //   }

  //   function chooseMenu(side) {
  //     const chosenMenu = side === "left" ? roundMenus[0] : roundMenus[1];
  //     nextRoundMenus.push(chosenMenu);
  //     roundMenus.splice(0, 2);
  //     startGame();
  //   }

  //  startGame();
  </script>
</body>
</html>